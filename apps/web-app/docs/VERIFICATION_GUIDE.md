# ğŸ§ª åŠŸèƒ½éªŒè¯æŒ‡å— - å»ºç«‹æ€§èƒ½ä¼˜åŒ–ç›´è§‰

## ğŸ¯ éªŒè¯ç›®æ ‡

é€šè¿‡ Chrome DevTools è§‚å¯Ÿå¹¶éªŒè¯ï¼š
1. âœ… Code Splittingï¼ˆä»£ç åˆ†å‰²ï¼‰
2. âœ… Gzip + Brotli å‹ç¼©
3. âœ… Quicklink è‡ªåŠ¨é¢„åŠ è½½
4. âœ… Service Worker ç¼“å­˜
5. âœ… Google Analytics ç¯å¢ƒåˆ†ç¦»
6. âœ… Guess.js è‡ªé€‚åº”é™çº§

---

## ğŸ“¦ æ­¥éª¤ 1ï¼šéªŒè¯ Code Splitting

### ğŸ¬ æ“ä½œæ­¥éª¤

```bash
# 1. æ„å»ºé¡¹ç›®
cd apps/web-app
pnpm run build

# 2. æŸ¥çœ‹æ„å»ºäº§ç‰©
ls -lh dist/js/
```

### ğŸ‘€ é¢„æœŸç»“æœ

ä½ åº”è¯¥çœ‹åˆ°ï¼š
```
vendor-react.xxxxxx.js    134KB  # React ç›¸å…³åº“
vendor-utils.xxxxxx.js    3.5KB  # Quicklink ç­‰å·¥å…·
vendors.xxxxxx.js         21KB   # å…¶ä»–ç¬¬ä¸‰æ–¹åº“
main.xxxxxx.js            52KB   # åº”ç”¨ä¸»ä»£ç 
runtime.xxxxxx.js         3KB    # Webpack è¿è¡Œæ—¶

# ä»¥åŠæ‡’åŠ è½½çš„é¡µé¢ chunks
465.xxxxxx.chunk.js       529B   # æŸä¸ªé¡µé¢
407.xxxxxx.chunk.js       218B   # æŸä¸ªé¡µé¢
...
```

### ğŸ’¡ å…³é”®è§‚å¯Ÿç‚¹

1. **åˆ†å±‚æ¸…æ™°**ï¼šReactã€å·¥å…·åº“ã€åº”ç”¨ä»£ç åˆ†å¼€
2. **ä½“ç§¯åˆç†**ï¼šä¸»åŒ… < 52KBï¼ŒåŠ è½½å¿«
3. **æ‡’åŠ è½½**ï¼šé¡µé¢ç»„ä»¶æ˜¯ç‹¬ç«‹çš„ chunk

### ğŸ“ å»ºç«‹ç›´è§‰

**é—®è‡ªå·±**ï¼š
- å¦‚æœä¸åˆ†å‰²ï¼Œæ‰€æœ‰ä»£ç æ‰“åŒ…åœ¨ä¸€èµ·ä¼šå¤šå¤§ï¼Ÿï¼ˆ200KB+ï¼‰
- åˆ†å‰²åï¼Œé¦–å±åªéœ€åŠ è½½å“ªäº›ï¼Ÿï¼ˆvendor-react + main â‰ˆ 186KBï¼‰
- ç”¨æˆ·ç‚¹å‡»è¿›å…¥æ–°é¡µé¢æ—¶ï¼Œéœ€è¦ä¸‹è½½å¤šå°‘ï¼Ÿï¼ˆåªæœ‰å¯¹åº”çš„ chunkï¼Œ< 1KBï¼‰

---

## ğŸ—œï¸ æ­¥éª¤ 2ï¼šéªŒè¯å‹ç¼©æ•ˆæœ

### ğŸ¬ æ“ä½œæ­¥éª¤

```bash
# æŸ¥çœ‹å‹ç¼©æ–‡ä»¶
cd dist/js
ls -lh | grep -E "\.js$|\.gz$|\.br$"
```

### ğŸ‘€ é¢„æœŸç»“æœ

```bash
# åŸå§‹æ–‡ä»¶
vendor-react.xxxxxx.js        134KB

# Gzip å‹ç¼©ï¼ˆ~68% å‹ç¼©ç‡ï¼‰
vendor-react.xxxxxx.js.gz     43KB

# Brotli å‹ç¼©ï¼ˆ~72% å‹ç¼©ç‡ï¼Œæ›´ä¼˜ï¼‰
vendor-react.xxxxxx.js.br     38KB
```

### ğŸ’¡ å…³é”®è§‚å¯Ÿç‚¹

**å¯¹æ¯”ä¸‰ç§æ–‡ä»¶å¤§å°**ï¼š
```
åŸå§‹: 134KB (100%)
Gzip: 43KB  (32%)   â† èŠ‚çœ 68%
Brotli: 38KB (28%)  â† èŠ‚çœ 72%
```

### ğŸ“ å»ºç«‹ç›´è§‰

**å®é™…åœºæ™¯**ï¼š
- ç”¨æˆ·æµè§ˆå™¨æ”¯æŒ Brotli â†’ Nginx è¿”å› .br æ–‡ä»¶ â†’ ä¸‹è½½ 38KB
- ç”¨æˆ·æµè§ˆå™¨åªæ”¯æŒ Gzip â†’ Nginx è¿”å› .gz æ–‡ä»¶ â†’ ä¸‹è½½ 43KB
- è€æ—§æµè§ˆå™¨ â†’ Nginx è¿”å›åŸå§‹æ–‡ä»¶ â†’ ä¸‹è½½ 134KB

**é—®è‡ªå·±**ï¼š
- åœ¨ 3G ç½‘ç»œï¼ˆä¸‹è½½é€Ÿåº¦ ~500KB/sï¼‰ä¸‹ï¼š
  - æœªå‹ç¼©ï¼š134KB Ã· 500KB/s = 0.27 ç§’
  - Brotliï¼š38KB Ã· 500KB/s = 0.08 ç§’
  - **å¿«äº† 3.4 å€ï¼**

---

## ğŸš€ æ­¥éª¤ 3ï¼šéªŒè¯ Quicklink é¢„åŠ è½½

### ğŸ¬ æ“ä½œæ­¥éª¤

```bash
# 1. å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨
pnpm run serve

# 2. æ‰“å¼€ Chrome æµè§ˆå™¨
# è®¿é—®ï¼šhttp://localhost:3000

# 3. æ‰“å¼€ DevTools
# - æŒ‰ F12 æˆ– Cmd+Option+I
# - åˆ‡æ¢åˆ° Network é¢æ¿
# - å‹¾é€‰ "Disable cache"ï¼ˆæµ‹è¯•æ—¶ç¦ç”¨ç¼“å­˜ï¼‰
```

### ğŸ‘€ è§‚å¯Ÿæ­¥éª¤

#### åœºæ™¯ 1ï¼šé¦–å±åŠ è½½

1. åˆ·æ–°é¡µé¢ï¼ˆCmd+Rï¼‰
2. åœ¨ Network é¢æ¿è§‚å¯Ÿï¼š

```
Name                      Type        Priority    Initiator
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
main.js                   script      High        (index.html)
vendor-react.js           script      High        (index.html)
...

# æ³¨æ„ï¼šæ­¤æ—¶æ²¡æœ‰å…¶ä»–é¡µé¢çš„ chunk
```

#### åœºæ™¯ 2ï¼šæ»šåŠ¨è§¦å‘ Quicklink

1. **å‘ä¸‹æ»šåŠ¨é¡µé¢**ï¼ˆå‡è®¾é¡µé¢æœ‰é“¾æ¥ï¼‰
2. è§‚å¯Ÿ Network é¢æ¿ï¼š

```
Name                      Type        Priority    Initiator
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
465.xxxxxx.chunk.js       prefetch    Lowest      (quicklink)
691.xxxxxx.chunk.js       prefetch    Lowest      (quicklink)
```

**å…³é”®æ ‡å¿—**ï¼š
- âœ… Type: `prefetch`ï¼ˆé¢„åŠ è½½ï¼Œä¸é˜»å¡ï¼‰
- âœ… Priority: `Lowest`ï¼ˆæœ€ä½ä¼˜å…ˆçº§ï¼‰
- âœ… Initiator: `quicklink`ï¼ˆæ¥è‡ª Quicklinkï¼‰

### ğŸ’¡ å…³é”®è§‚å¯Ÿç‚¹

**æ‰“å¼€ Console é¢æ¿**ï¼Œä½ ä¼šçœ‹åˆ°ï¼š
```javascript
[PredictiveRouter] å½“å‰è·¯ç”±ï¼š/
[PredictiveRouter] é¢„æµ‹è·¯ç”±ï¼š[{path: '/wallets', probability: 0.8, ...}]
[PredictiveRouter] é¢„åŠ è½½è·¯ç”±ï¼š/wallets (idle)
```

### ğŸ“ å»ºç«‹ç›´è§‰

**å®éªŒ**ï¼š
1. **ä¸æ»šåŠ¨**ï¼Œç›´æ¥ç‚¹å‡»é“¾æ¥ â†’ éœ€è¦ç­‰å¾…ä¸‹è½½ chunkï¼ˆæœ‰å»¶è¿Ÿï¼‰
2. **å…ˆæ»šåŠ¨**ï¼Œå†ç‚¹å‡»é“¾æ¥ â†’ chunk å·²åœ¨ç¼“å­˜ï¼Œç§’å¼€ï¼

**é—®è‡ªå·±**ï¼š
- Quicklink å¦‚ä½•çŸ¥é“è¯¥é¢„åŠ è½½å“ªäº›ï¼Ÿ
  - ç­”ï¼šç›‘å¬è§†å£ï¼ˆIntersectionObserverï¼‰
- ä¸ºä»€ä¹ˆä¼˜å…ˆçº§æ˜¯ Lowestï¼Ÿ
  - ç­”ï¼šä¸é˜»å¡ä¸»è¦èµ„æºï¼Œç”¨æˆ·ä½“éªŒä¼˜å…ˆ
- å¦‚æœç”¨æˆ·åœ¨ 2G ç½‘ç»œä¼šæ€æ ·ï¼Ÿ
  - ç­”ï¼š`shouldPrefetch()` æ£€æµ‹åˆ°æ…¢é€Ÿç½‘ç»œï¼Œç¦ç”¨é¢„åŠ è½½

---

## ğŸ“Š æ­¥éª¤ 4ï¼šéªŒè¯ Google Analytics ç¯å¢ƒåˆ†ç¦»

### ğŸ¬ æ“ä½œæ­¥éª¤

#### æµ‹è¯• 1ï¼šç”Ÿäº§ç¯å¢ƒï¼ˆæ—  GA IDï¼‰

```bash
# 1. æ„å»ºï¼ˆä¸è®¾ç½® GA_MEASUREMENT_IDï¼‰
pnpm run build

# 2. æŸ¥çœ‹ index.html
cat dist/index.html | grep -A 5 "Google Analytics"
```

**é¢„æœŸç»“æœ**ï¼š
```html
<!-- æ‰¾ä¸åˆ° GA è„šæœ¬ -->
<!-- ä½†æœ‰è­¦å‘Šè„šæœ¬ -->
<script>
  console.warn("[GA] Google Analytics æœªé…ç½®ï¼Œæ— æ³•æ”¶é›†æ•°æ®ã€‚")
</script>
```

#### æµ‹è¯• 2ï¼šç”Ÿäº§ç¯å¢ƒï¼ˆæœ‰ GA IDï¼‰

```bash
# æ–¹æ³• 1ï¼šä½¿ç”¨æµ‹è¯•è„šæœ¬ï¼ˆæ¨èï¼‰
pnpm run build:test

# æ–¹æ³• 2ï¼šæ‰‹åŠ¨è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆå¿…é¡»åœ¨åŒä¸€è¡Œï¼‰
GA_MEASUREMENT_ID=G-TEST123456 pnpm run build

# æŸ¥çœ‹ç”Ÿæˆçš„ HTMLï¼ˆåº”è¯¥åŒ…å« gtag ä»£ç ï¼‰
cat dist/index.html | grep "gtag"
```

**é¢„æœŸç»“æœ**ï¼š
```html
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TEST123456"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-TEST123456', {...});
</script>
```

**âš ï¸ å¸¸è§é”™è¯¯**ï¼š
```bash
# âŒ é”™è¯¯ï¼šåˆ†ä¸¤è¡Œæ‰§è¡Œï¼ˆç¯å¢ƒå˜é‡ä¸ä¼šä¼ é€’ç»™ pnpmï¼‰
export GA_MEASUREMENT_ID=G-TEST123456
pnpm run build  # ç¯å¢ƒå˜é‡å¯èƒ½ä¸¢å¤±

# âœ… æ­£ç¡®ï¼šä¸€è¡Œæ‰§è¡Œ
GA_MEASUREMENT_ID=G-TEST123456 pnpm run build
```

#### æµ‹è¯• 3ï¼šå¼€å‘ç¯å¢ƒ

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm run dev

# æŸ¥çœ‹æµè§ˆå™¨æ ‡é¢˜
# åº”è¯¥æ˜¾ç¤ºï¼šWeb3 é’±åŒ…ç®¡ç†ä¸­å¿ƒ [DEV]

# æŸ¥çœ‹ Console
# ä¸åº”è¯¥æœ‰ GA è¯·æ±‚
```

### ğŸ’¡ å…³é”®è§‚å¯Ÿç‚¹

| ç¯å¢ƒ | HTML æ¨¡æ¿ | GA è„šæœ¬ | æ ‡é¢˜ |
|------|-----------|---------|------|
| å¼€å‘ | index-dev.html | âŒ æ—  | [DEV] |
| ç”Ÿäº§ï¼ˆæ— IDï¼‰ | index-prod.html | âŒ è­¦å‘Š | æ­£å¸¸ |
| ç”Ÿäº§ï¼ˆæœ‰IDï¼‰ | index-prod.html | âœ… æœ‰ | æ­£å¸¸ |

### ğŸ“ å»ºç«‹ç›´è§‰

**é—®è‡ªå·±**ï¼š
- ä¸ºä»€ä¹ˆå¼€å‘ç¯å¢ƒä¸éœ€è¦ GAï¼Ÿ
  - ç­”ï¼šé¿å…æ±¡æŸ“ç”Ÿäº§æ•°æ®
- å¦‚ä½•ç¡®ä¿å¿˜è®°è®¾ç½® GA æ—¶ä¸ä¼šé™é»˜å¤±è´¥ï¼Ÿ
  - ç­”ï¼šæ„å»ºæ—¶æ˜¾ç¤ºè­¦å‘Šï¼Œè¿è¡Œæ—¶ console.warn
- è®¾ç½® GA åéœ€è¦æ”¹ä»£ç å—ï¼Ÿ
  - ç­”ï¼šä¸éœ€è¦ï¼Œåªéœ€é‡æ–°æ„å»º

---

## ğŸ”® æ­¥éª¤ 5ï¼šéªŒè¯ Guess.js è‡ªé€‚åº”é™çº§

### ğŸ¬ æ“ä½œæ­¥éª¤

```bash
# 1. æ„å»ºï¼ˆä¸è®¾ç½® GUESS_GA_VIEW_IDï¼‰
pnpm run build

# 2. æŸ¥çœ‹æ„å»ºæ—¥å¿—ï¼ˆå¿…é¡»å¯ç”¨ DEBUG æ¨¡å¼ï¼‰
# æ–¹æ³• 1ï¼šä½¿ç”¨è°ƒè¯•è„šæœ¬ï¼ˆæ¨èï¼‰
pnpm run build:debug 2>&1 | grep "DEBUG::"

# æ–¹æ³• 2ï¼šæ‰‹åŠ¨è®¾ç½®ç¯å¢ƒå˜é‡
DEBUG=true pnpm run build 2>&1 | grep "DEBUG::"
```

### ğŸ‘€ é¢„æœŸç»“æœ

```bash
DEBUG::1767317709044:: Mapping between chunk name and entry point {}
DEBUG::1767317709044:: Initial mapping between routes and probability {}
DEBUG::1767317709044:: Built the model {}
DEBUG::1767317709044:: File to chunk mapping {}
DEBUG::1767317709044:: Chunk to route mapping is {}
# æ‰€æœ‰ç©ºå¯¹è±¡ {} = æ— é¢„æµ‹æ•°æ®ï¼ŒGuess.js æ­£ç¡®é™çº§
```

**âœ… æˆåŠŸæ ‡å¿—**ï¼š
- æ‰€æœ‰æ˜ å°„éƒ½æ˜¯ç©ºå¯¹è±¡ `{}`
- æ²¡æœ‰æŠ¥é”™
- è¿™è¯æ˜ Guess.js å·²æ­£ç¡®é…ç½®ï¼Œåªæ˜¯å› ä¸ºæ²¡æœ‰ GA æ•°æ®è€Œé™çº§

**âš ï¸ æ³¨æ„**ï¼š
- å¦‚æœä¸åŠ  `DEBUG=true`ï¼Œä¸ä¼šçœ‹åˆ°ä»»ä½•è¾“å‡ºï¼ˆdebug æ¨¡å¼é»˜è®¤å…³é—­ï¼‰
- è¿™æ˜¯æ­£å¸¸çš„ï¼ŒGuess.js åœ¨æ²¡æœ‰æ•°æ®æ—¶æ˜¯é™é»˜çš„

### ğŸ’¡ å…³é”®è§‚å¯Ÿç‚¹

**è¿™æ˜¯æ­£å¸¸çš„ï¼** è¯´æ˜ï¼š
1. âœ… Guess.js æ£€æµ‹åˆ°æ— æ•°æ®
2. âœ… è‡ªåŠ¨é™çº§åˆ°é™æ€é…ç½® + Quicklink
3. âœ… åº”ç”¨ä»ç„¶æ­£å¸¸å·¥ä½œ

### ğŸ“ å»ºç«‹ç›´è§‰

**å®éªŒåœºæ™¯**ï¼š

| æƒ…å†µ | Guess.js çŠ¶æ€ | å®é™…ä½¿ç”¨ç­–ç•¥ |
|------|--------------|-------------|
| æ–°é¡¹ç›®ï¼ˆå½“å‰ï¼‰ | ç©ºæ¨¡å‹ | é™æ€é…ç½® + Quicklink |
| è®¾ç½® GA View ID | ä» GA è·å–æ•°æ® | ML é¢„æµ‹ + é™æ€ + Quicklink |
| GA æ•°æ®ä¸è¶³ | ç©ºæ¨¡å‹ | è‡ªåŠ¨é™çº§ |

**é—®è‡ªå·±**ï¼š
- å¦‚æœå¼ºè¡Œä½¿ç”¨ Guess.js æ— æ•°æ®ä¼šæ€æ ·ï¼Ÿ
  - ç­”ï¼šè‡ªåŠ¨é™çº§ï¼Œä¸ä¼šå´©æºƒ
- ä¸‰å±‚ç­–ç•¥ä¼šå†²çªå—ï¼Ÿ
  - ç­”ï¼šä¸ä¼šï¼Œæµè§ˆå™¨ä¼šå»é‡ç›¸åŒ URL çš„è¯·æ±‚

---

## ğŸ› ï¸ æ­¥éª¤ 6ï¼šä½¿ç”¨ Chrome DevTools æ€§èƒ½åˆ†æ

> **æ³¨æ„**: æœ¬æ­¥éª¤å·²ä½¿ç”¨ **MCP Chrome DevTools å·¥å…·**å®Œæˆè‡ªåŠ¨åŒ–éªŒè¯ï¼
> æŸ¥çœ‹å®Œæ•´åˆ†ææŠ¥å‘Šï¼š[PERFORMANCE_ANALYSIS.md](./PERFORMANCE_ANALYSIS.md)

### ğŸ¬ æ“ä½œæ­¥éª¤

```bash
# 1. å¯åŠ¨æœåŠ¡å™¨
pnpm run serve

# 2. æ‰“å¼€ Chromeï¼ˆæ— ç—•æ¨¡å¼ï¼Œé¿å…ç¼“å­˜å¹²æ‰°ï¼‰
# è®¿é—®ï¼šhttp://localhost:65433  # æ³¨æ„ç«¯å£å¯èƒ½ä¸æ˜¯ 3000
```

### âœ… å·²éªŒè¯çš„æ ¸å¿ƒå‘ç°ï¼ˆé€šè¿‡ MCP å·¥å…·ï¼‰

| ç‰¹æ€§ | éªŒè¯ç»“æœ | è¯æ®æ¥æº |
|------|----------|----------|
| **Code Splitting** | âœ… 6 ä¸ª chunks | Network é¢æ¿ |
| **Brotli å‹ç¼©** | âœ… 72% å‹ç¼©ç‡ | Response Headers |
| **Quicklink é¢„åŠ è½½** | âœ… idle é¢„åŠ è½½ /wallets | Console æ—¥å¿— |
| **é™æ€è·¯ç”±é¢„æµ‹** | âœ… 80% /wallets, 20% /settings | Console æ—¥å¿— |
| **Service Worker** | âœ… å·²æ³¨å†Œ | Console æ—¥å¿— |

**å…³é”®æ•°æ®**ï¼š
- vendor-react.js: 134KB â†’ 38KB (Brotli)
- `content-encoding: br` ç¡®è®¤
- `[PredictiveRouter] é¢„åŠ è½½è·¯ç”±ï¼š/wallets (idle)` ç¡®è®¤

### ğŸ“Š Performance é¢æ¿éªŒè¯

#### 6.1 è®°å½•é¡µé¢åŠ è½½

1. æ‰“å¼€ DevTools â†’ **Performance** é¢æ¿
2. ç‚¹å‡» **Record** æŒ‰é’®
3. åˆ·æ–°é¡µé¢ï¼ˆCmd+Rï¼‰
4. ç­‰å¾…åŠ è½½å®Œæˆï¼Œç‚¹å‡» **Stop**

#### 6.2 åˆ†ææ—¶é—´çº¿

åœ¨ Performance æ—¶é—´çº¿ä¸­è§‚å¯Ÿï¼š

```
0ms â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     â†“ HTML ä¸‹è½½
100ms â”œâ”€ Parse HTML
     â†“ åŠ è½½ JS chunksï¼ˆå¹¶è¡Œï¼‰
     â”œâ”€ vendor-react.js
     â”œâ”€ main.js
     â”œâ”€ ...
300ms â”œâ”€ Execute JavaScript
     â†“ React æ¸²æŸ“
400ms â”œâ”€ Paint
     â†“
500ms â””â”€ é¦–å±å®Œæˆï¼ˆFCPï¼‰

     â†“ æµè§ˆå™¨ç©ºé—²
600ms â”œâ”€ Quicklink å¼€å§‹é¢„åŠ è½½
     â”œâ”€ prefetch 465.chunk.js
     â”œâ”€ prefetch 691.chunk.js
     ...
```

#### 6.3 Core Web Vitals

åœ¨ Performance Insights é¢æ¿ï¼ˆChrome 102+ï¼‰æŸ¥çœ‹ï¼š

- **LCP** (Largest Contentful Paint): < 2.5s âœ…
- **FID** (First Input Delay): < 100ms âœ…
- **CLS** (Cumulative Layout Shift): < 0.1 âœ…

### ğŸ“Š Network é¢æ¿æ·±åº¦éªŒè¯

#### 6.1 éªŒè¯ Brotli å‹ç¼©

1. **Network** é¢æ¿ â†’ é€‰æ‹© `vendor-react.js`
2. æŸ¥çœ‹ **Response Headers**ï¼š

```http
Content-Encoding: br
Content-Length: 38000  # Brotli å‹ç¼©åçš„å¤§å°
```

3. æŸ¥çœ‹ **Size** åˆ—ï¼š
```
Size: 38.0 KB
Transferred: 38.0 KB  # å®é™…ä¼ è¾“å¤§å°
```

#### 6.2 éªŒè¯ç¼“å­˜ç­–ç•¥

1. **åˆ·æ–°é¡µé¢**ï¼ˆCmd+Rï¼‰
2. å†æ¬¡åˆ·æ–°ï¼ˆCmd+Rï¼‰
3. è§‚å¯Ÿ **Size** åˆ—ï¼š

```
Name                Size        Status
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
vendor-react.js     (disk cache) 200  # ä»ç£ç›˜ç¼“å­˜åŠ è½½
main.js             (disk cache) 200
```

### ğŸ’¡ å…³é”®è§‚å¯Ÿç‚¹

**é¦–æ¬¡åŠ è½½ vs äºŒæ¬¡åŠ è½½**ï¼š

| æŒ‡æ ‡ | é¦–æ¬¡åŠ è½½ | äºŒæ¬¡åŠ è½½ï¼ˆç¼“å­˜ï¼‰ |
|------|---------|----------------|
| è¯·æ±‚æ•° | 10 | 10 |
| ä¼ è¾“å¤§å° | 180 KB | 0 KBï¼ˆç¼“å­˜ï¼‰ |
| åŠ è½½æ—¶é—´ | 500ms | 50ms |

### ğŸ“ å»ºç«‹ç›´è§‰

**é—®è‡ªå·±**ï¼š
- ä¸ºä»€ä¹ˆäºŒæ¬¡åŠ è½½è¿™ä¹ˆå¿«ï¼Ÿ
  - ç­”ï¼šæµè§ˆå™¨ç¼“å­˜ + Service Worker
- å¦‚æœæ¸…é™¤ç¼“å­˜ä¼šæ€æ ·ï¼Ÿ
  - ç­”ï¼šå›åˆ°é¦–æ¬¡åŠ è½½é€Ÿåº¦ï¼Œä½†ä»æœ‰ Brotli å‹ç¼©ä¼˜åŠ¿
- ç§»åŠ¨è®¾å¤‡ä¸Šä¼šæ›´å¿«è¿˜æ˜¯æ›´æ…¢ï¼Ÿ
  - ç­”ï¼šå–å†³äºç½‘ç»œé€Ÿåº¦ï¼Œä½†å‹ç¼©å’Œç¼“å­˜ç­–ç•¥ç›¸åŒ

---

## ğŸ¯ ç»¼åˆéªŒè¯å®éªŒ

### å®éªŒ 1ï¼šå¯¹æ¯”æœ‰æ—  Quicklink

#### ç¦ç”¨ Quicklink

ç¼–è¾‘ `src/components/PredictiveRouter.tsx`ï¼š
```typescript
// ä¸´æ—¶æ³¨é‡Šæ‰ Quicklink
// const quicklinkCleanup = listen({ ... });
```

#### æµ‹è¯•æ­¥éª¤

1. **æœ‰ Quicklink**ï¼š
   - æ»šåŠ¨é¡µé¢ â†’ é¢„åŠ è½½ chunk
   - ç‚¹å‡»é“¾æ¥ â†’ ç§’å¼€

2. **æ—  Quicklink**ï¼š
   - ç›´æ¥ç‚¹å‡»é“¾æ¥ â†’ ç­‰å¾…ä¸‹è½½ chunk â†’ æœ‰å»¶è¿Ÿ

**æ„Ÿå—å·®å¼‚**ï¼

---

### å®éªŒ 2ï¼šå¯¹æ¯”æœ‰æ— å‹ç¼©

#### æµ‹è¯• Brotli vs æ— å‹ç¼©

```bash
# 1. æ¨¡æ‹Ÿç¦ç”¨ Brotli
# ä¸´æ—¶ç§»é™¤ .br æ–‡ä»¶
cd dist/js
rm *.br

# 2. å¯åŠ¨æœåŠ¡å™¨
pnpm run serve

# 3. åœ¨ Network é¢æ¿è§‚å¯Ÿ
# Content-Encoding: gzipï¼ˆé™çº§åˆ° gzipï¼‰

# 4. æ¢å¤ .br æ–‡ä»¶
pnpm run build
```

**è§‚å¯Ÿä¼ è¾“å¤§å°çš„å˜åŒ–**ï¼

---

### å®éªŒ 3ï¼šæ…¢é€Ÿç½‘ç»œæ¨¡æ‹Ÿ

#### Chrome DevTools ç½‘ç»œé™é€Ÿ

1. **Network** é¢æ¿ â†’ **Throttling** ä¸‹æ‹‰èœå•
2. é€‰æ‹© **Slow 3G**
3. åˆ·æ–°é¡µé¢

**è§‚å¯Ÿ**ï¼š
- åŠ è½½æ—¶é—´æ˜æ˜¾å˜é•¿
- ä½†å‹ç¼©çš„ä¼˜åŠ¿æ›´æ˜æ˜¾ï¼ˆä¼ è¾“çš„å­—èŠ‚å°‘ï¼‰
- Quicklink å¯èƒ½è¢«ç¦ç”¨ï¼ˆæ£€æµ‹åˆ°æ…¢é€Ÿç½‘ç»œï¼‰

---

## ğŸ“ éªŒè¯æ¸…å•

å®ŒæˆéªŒè¯åï¼Œå‹¾é€‰ä¸‹åˆ—é¡¹ç›®ï¼š

### Code Splitting
- [ ] æŸ¥çœ‹ dist/js/ ç¡®è®¤æ–‡ä»¶åˆ†å±‚
- [ ] è®¡ç®—å‹ç¼©å‰åçš„ä½“ç§¯å·®å¼‚
- [ ] ç†è§£æ¯ä¸ª chunk çš„ç”¨é€”

### å‹ç¼©
- [ ] å¯¹æ¯” .jsã€.gzã€.br ä¸‰ç§æ–‡ä»¶å¤§å°
- [ ] åœ¨ Network é¢æ¿éªŒè¯ Content-Encoding
- [ ] è®¡ç®—å‹ç¼©ç‡ï¼ˆBrotli çº¦ 72%ï¼‰

### Quicklink
- [ ] åœ¨ Console çœ‹åˆ°é¢„åŠ è½½æ—¥å¿—
- [ ] åœ¨ Network çœ‹åˆ° prefetch è¯·æ±‚
- [ ] ä½“éªŒæœ‰æ— é¢„åŠ è½½çš„é€Ÿåº¦å·®å¼‚

### Service Worker
- [ ] åœ¨ Application é¢æ¿æŸ¥çœ‹ Service Worker çŠ¶æ€
- [ ] æŸ¥çœ‹é¢„ç¼“å­˜çš„æ–‡ä»¶åˆ—è¡¨
- [ ] ç¦»çº¿æ—¶éªŒè¯åº”ç”¨ä»å¯è®¿é—®

### Google Analytics
- [ ] éªŒè¯å¼€å‘ç¯å¢ƒæ—  GA è„šæœ¬
- [ ] éªŒè¯ç”Ÿäº§ç¯å¢ƒï¼ˆæ—  IDï¼‰æ˜¾ç¤ºè­¦å‘Š
- [ ] éªŒè¯ç”Ÿäº§ç¯å¢ƒï¼ˆæœ‰ IDï¼‰åŠ è½½ GA

### Guess.js
- [ ] æŸ¥çœ‹æ„å»ºæ—¥å¿—ç¡®è®¤é™çº§
- [ ] ç†è§£ä¸‰å±‚ç­–ç•¥çš„åä½œæ–¹å¼

---

## ğŸ“ å»ºç«‹ç›´è§‰çš„æ ¸å¿ƒé—®é¢˜

å®ŒæˆéªŒè¯åï¼Œå›ç­”ä»¥ä¸‹é—®é¢˜ä»¥å·©å›ºç†è§£ï¼š

1. **é¦–å±åŠ è½½æ—¶é—´çš„ä¸‰å¤§ç“¶é¢ˆæ˜¯ä»€ä¹ˆï¼Ÿ**
   <details>
   <summary>ç­”æ¡ˆ</summary>

   - ç½‘ç»œä¸‹è½½æ—¶é—´ï¼ˆé€šè¿‡å‹ç¼©è§£å†³ï¼‰
   - JavaScript è§£ææ‰§è¡Œæ—¶é—´ï¼ˆé€šè¿‡ Code Splitting è§£å†³ï¼‰
   - æ¸²æŸ“æ—¶é—´ï¼ˆé€šè¿‡ä¼˜åŒ– React ç»„ä»¶è§£å†³ï¼‰
   </details>

2. **ä¸ºä»€ä¹ˆ Brotli å‹ç¼©ç‡æ¯” Gzip é«˜ï¼Ÿ**
   <details>
   <summary>ç­”æ¡ˆ</summary>

   - Brotli ä½¿ç”¨æ›´å¤§çš„å­—å…¸ï¼ˆé¢„å®šä¹‰å¸¸è§æ¨¡å¼ï¼‰
   - æ›´å…ˆè¿›çš„ç®—æ³•ï¼ˆ2015 å¹´ vs 1992 å¹´ï¼‰
   - ä½†å‹ç¼©é€Ÿåº¦ç¨æ…¢ï¼ˆé€‚åˆé¢„å‹ç¼©ï¼Œä¸é€‚åˆåŠ¨æ€å‹ç¼©ï¼‰
   </details>

3. **Quicklink å¦‚ä½•é¿å…æµªè´¹ç”¨æˆ·æµé‡ï¼Ÿ**
   <details>
   <summary>ç­”æ¡ˆ</summary>

   - æ£€æµ‹ `navigator.connection.saveData`ï¼ˆèŠ‚çœæµé‡æ¨¡å¼ï¼‰
   - æ£€æµ‹ `navigator.connection.effectiveType`ï¼ˆç½‘ç»œç±»å‹ï¼‰
   - 2G/slow-2G æ—¶ç¦ç”¨é¢„åŠ è½½
   - ä½¿ç”¨ `requestIdleCallback`ï¼ˆæµè§ˆå™¨ç©ºé—²æ—¶æ‰§è¡Œï¼‰
   </details>

4. **ä¸‰å±‚é¢„æµ‹ç­–ç•¥å¦‚ä½•äº’è¡¥ï¼Ÿ**
   <details>
   <summary>ç­”æ¡ˆ</summary>

   - Guess.jsï¼šæ™ºèƒ½ä½†éœ€è¦æ•°æ®ï¼ˆæ–°é¡¹ç›®æ— æ•°æ®ï¼‰
   - é™æ€é…ç½®ï¼šåŸºäºä¸šåŠ¡é€»è¾‘ï¼Œç«‹å³å¯ç”¨
   - Quicklinkï¼šè‡ªåŠ¨æ•è·æ‰€æœ‰å¯è§é“¾æ¥ï¼Œå…œåº•
   </details>

5. **å¦‚æœç”¨æˆ·ç½‘ç»œçªç„¶å˜æ…¢ä¼šæ€æ ·ï¼Ÿ**
   <details>
   <summary>ç­”æ¡ˆ</summary>

   - æµè§ˆå™¨ç¼“å­˜ä»ç„¶æœ‰æ•ˆï¼ˆäºŒæ¬¡è®¿é—®å¿«ï¼‰
   - Quicklink æ£€æµ‹åˆ°æ…¢é€Ÿç½‘ç»œï¼Œç¦ç”¨é¢„åŠ è½½
   - å‹ç¼©çš„ä¼˜åŠ¿æ›´æ˜æ˜¾ï¼ˆä¼ è¾“å­—èŠ‚å°‘ï¼‰
   - Service Worker ç¦»çº¿ç¼“å­˜å¯ç”¨
   </details>

---

## ğŸš€ ä¸‹ä¸€æ­¥

å®ŒæˆéªŒè¯åï¼Œä½ åº”è¯¥æœ‰äº†ï¼š
âœ… å¯¹æ¯ä¸ªä¼˜åŒ–æŠ€æœ¯çš„**ç›´è§‰æ„Ÿå—**
âœ… çŸ¥é“å¦‚ä½•ä½¿ç”¨ DevTools **è§‚å¯Ÿå’Œè°ƒè¯•**
âœ… ç†è§£ä¼˜åŒ–çš„**æƒè¡¡å’Œæˆæœ¬**

**å‡†å¤‡å¥½è¿›å…¥é˜¶æ®µ 4ï¼šPWA ä¸ç¦»çº¿èƒ½åŠ›äº†å—ï¼Ÿ**

é‚£å°†æ˜¯æ›´é…·çš„åŠŸèƒ½ï¼š
- ğŸ“± å®‰è£…åˆ°æ¡Œé¢ï¼ˆPWAï¼‰
- ğŸ”Œ ç¦»çº¿è®¿é—®
- ğŸ”” æ¨é€é€šçŸ¥ï¼ˆå¯é€‰ï¼‰
- ğŸ”„ åå°åŒæ­¥ï¼ˆå¯é€‰ï¼‰
