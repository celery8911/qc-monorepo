<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Web3 é’±åŒ…ç®¡ç†åº”ç”¨ - å®‰å…¨ã€ä¾¿æ·ã€å®æ—¶çš„åŒºå—é“¾é’±åŒ…ç®¡ç†å·¥å…·">
  <meta name="theme-color" content="#3b82f6">

  <!-- PWA -->
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">

  <!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
       ğŸ“Š Google Analyticsï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
       â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

       ä¸ºä»€ä¹ˆéœ€è¦ GAï¼Ÿ
       1. æ”¶é›†ç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼ˆè·¯ç”±è·³è½¬ã€é¡µé¢åœç•™æ—¶é—´ç­‰ï¼‰
       2. ä¸º Guess.js æä¾›è®­ç»ƒæ•°æ®
       3. ä¼˜åŒ–äº§å“å†³ç­–

       é…ç½®æ–¹å¼ï¼š
       1. è·å– Google Analytics Measurement ID
          - ç™»å½• https://analytics.google.com
          - Admin â†’ Data Streams â†’ è·å– Measurement IDï¼ˆG-XXXXXXXXXXï¼‰
       2. è®¾ç½®ç¯å¢ƒå˜é‡ï¼šGA_MEASUREMENT_ID=G-XXXXXXXXXX
       3. æ„å»ºæ—¶è‡ªåŠ¨æ³¨å…¥

       éšç§è¯´æ˜ï¼š
       - ä»…åœ¨ç”Ÿäº§ç¯å¢ƒå¯ç”¨
       - ç¬¦åˆ GDPR è¦æ±‚ï¼ˆéœ€é…ç½® Cookie åŒæ„æ¨ªå¹…ï¼‰
       â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->

  <% if (htmlWebpackPlugin.options.gaId) { %>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=<%= htmlWebpackPlugin.options.gaId %>"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', '<%= htmlWebpackPlugin.options.gaId %>', {
      // é…ç½®é¡¹ï¼ˆå¯é€‰ï¼‰
      'anonymize_ip': true,  // IP åŒ¿ååŒ–ï¼ˆGDPR è¦æ±‚ï¼‰
      'send_page_view': true, // è‡ªåŠ¨å‘é€é¡µé¢æµè§ˆ
    });

    // SPA è·¯ç”±è¿½è¸ª
    // é…åˆ React Router è¿½è¸ªå•é¡µåº”ç”¨çš„è·¯ç”±å˜åŒ–
    window.addEventListener('popstate', () => {
      gtag('event', 'page_view', {
        page_path: window.location.pathname + window.location.search
      });
    });
  </script>
  <% } %>

  <title>Web3 é’±åŒ…ç®¡ç†ä¸­å¿ƒ</title>
</head>
<body>
  <noscript>You need to enable JavaScript to run this app.</noscript>
  <div id="root"></div>

  <% if (!htmlWebpackPlugin.options.gaId) { %>
  <!-- âš ï¸ Google Analytics æœªé…ç½® -->
  <!-- è®¾ç½®ç¯å¢ƒå˜é‡ GA_MEASUREMENT_ID ä»¥å¯ç”¨æ•°æ®æ”¶é›† -->
  <script>
    console.warn('[GA] Google Analytics æœªé…ç½®ï¼Œæ— æ³•æ”¶é›†æ•°æ®ã€‚');
    console.warn('[GA] è®¾ç½®ç¯å¢ƒå˜é‡ GA_MEASUREMENT_ID=G-XXXXXXXXXX ä»¥å¯ç”¨ã€‚');
  </script>
  <% } %>
</body>
</html>
